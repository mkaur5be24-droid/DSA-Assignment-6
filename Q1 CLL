#include <iostream>
using namespace std;

struct Node{
    int data;
    Node *next;
};
Node *head = NULL;

void insertFirst(int x){
    Node *n = new Node();
    n->data = x;

    if(!head){
        n->next = n;
        head = n;
        return;
    }

    Node *t = head;
    while(t->next != head) t = t->next;

    n->next = head;
    t->next = n;
    head = n;
}

void insertLast(int x){
    Node *n = new Node();
    n->data = x;

    if(!head){
        n->next = n;
        head = n;
        return;
    }

    Node *t = head;
    while(t->next != head) t = t->next;

    t->next = n;
    n->next = head;
}

void insertAfter(int key, int x){
    Node *t = head;
    if(!t) return;
    do{
        if(t->data == key){
            Node *n = new Node();
            n->data = x;
            n->next = t->next;
            t->next = n;
            return;
        }
        t = t->next;
    }while(t != head);
}

void deleteNode(int key){
    if(!head) return;

    Node *t = head, *prev = NULL;

    do{
        if(t->data == key){
            if(prev == NULL){ 
                Node *p = head;
                while(p->next != head) p = p->next;
                head = head->next;
                p->next = head;
            }else{
                prev->next = t->next;
            }
            delete t;
            return;
        }
        prev = t;
        t = t->next;
    } while(t != head);
}

void searchNode(int key){
    if(!head){ cout << "Not Found\n"; return; }

    Node *t = head;
    do{
        if(t->data == key){ cout << "Found\n"; return; }
        t = t->next;
    }while(t != head);

    cout << "Not Found\n";
}

void display(){
    if(!head) return;
    Node *t = head;
    do{
        cout << t->data << " ";
        t = t->next;
    }while(t != head);
    cout << endl;
}
